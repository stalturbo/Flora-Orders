{"version":3,"names":["_react","require","_reactNativeReanimated","_constants","_context","_module","_useWindowDimensions","Object","keys","forEach","key","prototype","hasOwnProperty","call","_exportNames","exports","defineProperty","enumerable","get","_useKeyboardState","useResizeMode","useEffect","KeyboardController","setInputMode","AndroidSoftInputModes","SOFT_INPUT_ADJUST_RESIZE","setDefaultMode","useKeyboardAnimation","context","useKeyboardContext","animated","useReanimatedKeyboardAnimation","reanimated","useGenericKeyboardHandler","handler","deps","doDependenciesDiffer","useHandler","eventHandler","useEvent","event","eventName","endsWith","_handler$onStart","onStart","_handler$onMove","onMove","_handler$onEnd","onEnd","_handler$onInteractiv","onInteractive","useLayoutEffect","cleanup","setKeyboardHandlers","useKeyboardHandler","useKeyboardController","setEnabled","enabled","useReanimatedFocusedInput","input","layout","update","useFocusedInputHandler","_handler$onChangeText","onChangeText","_handler$onSelectionC","onSelectionChange","setInputHandlers"],"sources":["index.ts"],"sourcesContent":["import { useEffect, useLayoutEffect } from \"react\";\nimport { useEvent, useHandler } from \"react-native-reanimated\";\n\nimport { AndroidSoftInputModes } from \"../constants\";\nimport { useKeyboardContext } from \"../context\";\nimport { KeyboardController } from \"../module\";\n\nimport type { AnimatedContext, ReanimatedContext } from \"../context\";\nimport type {\n  FocusedInputHandler,\n  FocusedInputSelectionChangedEvent,\n  FocusedInputTextChangedEvent,\n  KeyboardHandler,\n  NativeEvent,\n} from \"../types\";\n\n/**\n * Hook that sets the Android soft input mode to adjust resize on mount and\n * restores default mode on unmount. This ensures the keyboard behavior is consistent\n * on all Android versions.\n *\n * @see {@link https://kirillzyusko.github.io/react-native-keyboard-controller/docs/api/keyboard-controller#setinputmode-|Documentation} page for more details.\n * @example\n * ```tsx\n * function MyComponent() {\n *   useResizeMode();\n *   return <View />;\n * }\n * ```\n */\nexport const useResizeMode = () => {\n  useEffect(() => {\n    KeyboardController.setInputMode(\n      AndroidSoftInputModes.SOFT_INPUT_ADJUST_RESIZE,\n    );\n\n    return () => KeyboardController.setDefaultMode();\n  }, []);\n};\n\n/**\n * Hook that provides animated (`height`/`progress`) values for tracking keyboard movement.\n * Automatically sets the resize mode for Android.\n *\n * @returns Object {@link AnimatedContext|containing} animated values for keyboard movement.\n * @see {@link https://kirillzyusko.github.io/react-native-keyboard-controller/docs/api/hooks/keyboard/use-keyboard-animation|Documentation} page for more details.\n * @example\n * ```tsx\n * function MyComponent() {\n *   const { height, progress } = useKeyboardAnimation();\n *   return <Animated.View style={{ transform: [{ translateY: height }] }} />;\n * }\n * ```\n */\nexport const useKeyboardAnimation = (): AnimatedContext => {\n  useResizeMode();\n  const context = useKeyboardContext();\n\n  return context.animated;\n};\n\n/**\n * Hook that provides reanimated (`height`/`progress`) values for tracking keyboard movement.\n * Automatically sets the resize mode for Android.\n *\n * @returns Object {@link ReanimatedContext|containing} reanimated values for keyboard movement.\n * @see {@link https://kirillzyusko.github.io/react-native-keyboard-controller/docs/api/hooks/keyboard/use-reanimated-keyboard-animation|Documentation} page for more details.\n * @example\n * ```tsx\n * function MyComponent() {\n *   const { height, progress } = useReanimatedKeyboardAnimation();\n *   return <Reanimated.View style={{ transform: [{ translateY: height }] }} />;\n * }\n * ```\n */\nexport const useReanimatedKeyboardAnimation = (): ReanimatedContext => {\n  useResizeMode();\n  const context = useKeyboardContext();\n\n  return context.reanimated;\n};\n\n/**\n * An alternative to {@link useKeyboardHandler} that doesn't set resize mode on mount. If your\n * app already uses `adjustResize`, then you can use this hook instead of `useKeyboardHandler`.\n *\n * @param handler - Object containing keyboard event handlers.\n * @param [deps] - Dependencies array for the effect.\n * @example\n * ```tsx\n * function MyComponent() {\n *   const height = useSharedValue(0);\n *   const progress = useSharedValue(0);\n *\n *   useGenericKeyboardHandler({\n *     onMove: (e) => {\n *       \"worklet\";\n *\n *       height.value = e.height;\n *       progress.value = e.progress;\n *     },\n *     onEnd: (e) => {\n *       \"worklet\";\n *\n *       height.value = e.height;\n *       progress.value = e.progress;\n *     },\n *   }, []);\n *\n *   return <Reanimated.View style={{ height: height }] }} />;\n * }\n * ```\n */\nexport function useGenericKeyboardHandler(\n  handler: KeyboardHandler,\n  deps?: unknown[],\n) {\n  const context = useKeyboardContext();\n\n  const { doDependenciesDiffer } = useHandler(handler, deps);\n\n  const eventHandler = useEvent<NativeEvent>(\n    (event) => {\n      \"worklet\";\n\n      if (event.eventName.endsWith(\"onKeyboardMoveStart\")) {\n        handler.onStart?.(event);\n      }\n\n      if (event.eventName.endsWith(\"onKeyboardMove\")) {\n        handler.onMove?.(event);\n      }\n\n      if (event.eventName.endsWith(\"onKeyboardMoveEnd\")) {\n        handler.onEnd?.(event);\n      }\n\n      if (event.eventName.endsWith(\"onKeyboardMoveInteractive\")) {\n        handler.onInteractive?.(event);\n      }\n    },\n    [\n      \"onKeyboardMoveStart\",\n      \"onKeyboardMove\",\n      \"onKeyboardMoveEnd\",\n      \"onKeyboardMoveInteractive\",\n    ],\n    doDependenciesDiffer,\n  );\n\n  useLayoutEffect(() => {\n    const cleanup = context.setKeyboardHandlers(eventHandler);\n\n    return () => cleanup();\n  }, deps);\n}\n\n/**\n * Hook that gives an access to each aspect of keyboard movement with workletized `onStart`/`onMove`/`onInteractive`/`onEnd` handlers.\n *\n * @param handler - Object containing keyboard event handlers.\n * @param [deps] - Dependencies array for the effect.\n * @see {@link https://kirillzyusko.github.io/react-native-keyboard-controller/docs/api/hooks/keyboard/use-keyboard-handler|Documentation} page for more details.\n * @example\n * ```tsx\n * function MyComponent() {\n *   const height = useSharedValue(0);\n *   const progress = useSharedValue(0);\n *\n *   useKeyboardHandler({\n *     onMove: (e) => {\n *       \"worklet\";\n *\n *       height.value = e.height;\n *       progress.value = e.progress;\n *     },\n *     onEnd: (e) => {\n *       \"worklet\";\n *\n *       height.value = e.height;\n *       progress.value = e.progress;\n *     },\n *   }, []);\n *\n *   return <Reanimated.View style={{ height: height }] }} />;\n * }\n * ```\n */\nexport function useKeyboardHandler(handler: KeyboardHandler, deps?: unknown[]) {\n  useResizeMode();\n  useGenericKeyboardHandler(handler, deps);\n}\n\n/**\n * Hook for controlling keyboard controller module.\n * Allows to disable/enable it and check the actual state (whether it's enabled or not).\n * When disabled it fallbacks to default android keyboard handling and stops tracking all\n * the events that are exposed from this library.\n *\n * @property {Function} setEnabled - Function to enable/disable keyboard handling.\n * @property {boolean} enabled - Current enabled state.\n * @returns Object containing keyboard control functions and state.\n * @see {@link https://kirillzyusko.github.io/react-native-keyboard-controller/docs/api/hooks/module/use-keyboard-controller|Documentation} page for more details.\n * @example\n * ```tsx\n * function MyComponent() {\n *   const { setEnabled, enabled } = useKeyboardController();\n *   return (\n *     <Button\n *       title={enabled ? 'Disable' : 'Enable'}\n *       onPress={() => setEnabled(!enabled)}\n *     />\n *   );\n * }\n * ```\n */\nexport function useKeyboardController() {\n  const context = useKeyboardContext();\n\n  return { setEnabled: context.setEnabled, enabled: context.enabled };\n}\n\n/**\n * Hook that provides access to the layout of the currently focused input.\n *\n * @returns Object containing reanimated values for focused input.\n * @see {@link https://kirillzyusko.github.io/react-native-keyboard-controller/docs/api/hooks/input/use-reanimated-focused-input|Documentation} page for more details.\n * @example\n * ```tsx\n * function MyComponent() {\n *   const { input } = useReanimatedFocusedInput();\n *   return <Reanimated.View style={{ height: input.value?.layout.height }} />;\n * }\n * ```\n */\nexport function useReanimatedFocusedInput() {\n  const context = useKeyboardContext();\n\n  return {\n    input: context.layout,\n    update: context.update,\n  };\n}\n\n/**\n * Hook for handling focused input events, such as changes of selection, text etc.\n *\n * @param handler - Object containing focused input event handlers.\n * @param [deps] - Dependencies array for the effect.\n * @see {@link https://kirillzyusko.github.io/react-native-keyboard-controller/docs/api/hooks/input/use-focused-input-handler|Documentation} page for more details.\n * @example\n * ```tsx\n * function MyComponent() {\n *   useFocusedInputHandler({\n *     onChangeText: (e) => console.log('Text changed:', e.text),\n *     onSelectionChange: (e) => console.log('Selection changed:', e.selection)\n *   });\n *   return <View />;\n * }\n * ```\n */\nexport function useFocusedInputHandler(\n  handler: FocusedInputHandler,\n  deps?: unknown[],\n) {\n  const context = useKeyboardContext();\n\n  const { doDependenciesDiffer } = useHandler<never, never>(handler, deps);\n\n  const eventHandler = useEvent<\n    FocusedInputSelectionChangedEvent | FocusedInputTextChangedEvent\n  >(\n    (event) => {\n      \"worklet\";\n\n      if (event.eventName.endsWith(\"onFocusedInputTextChanged\")) {\n        handler.onChangeText?.(event as FocusedInputTextChangedEvent);\n      }\n\n      if (event.eventName.endsWith(\"onFocusedInputSelectionChanged\")) {\n        handler.onSelectionChange?.(event as FocusedInputSelectionChangedEvent);\n      }\n    },\n    [\"onFocusedInputTextChanged\", \"onFocusedInputSelectionChanged\"],\n    doDependenciesDiffer,\n  );\n\n  useLayoutEffect(() => {\n    const cleanup = context.setInputHandlers(eventHandler);\n\n    return () => cleanup();\n  }, deps);\n}\n\nexport * from \"./useWindowDimensions\";\nexport * from \"./useKeyboardState\";\n"],"mappings":"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","ignoreList":[]}