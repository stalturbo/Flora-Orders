{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_bindings","_hooks","_KeyboardStickyView","_interopRequireDefault","_Arrow","_Button","_colors","_components","_context","_constants","e","__esModule","default","t","WeakMap","r","n","o","i","f","__proto__","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_extends","assign","bind","arguments","length","apply","KeyboardToolbar","props","children","content","theme","colors","doneText","button","icon","showArrows","onNextCallback","onPrevCallback","onDoneCallback","blur","opacity","DEFAULT_OPACITY","offset","closed","opened","enabled","insets","rest","colorScheme","useKeyboardState","state","appearance","inputs","setInputs","useState","current","count","isPrevDisabled","isNextDisabled","buttonContainer","Button","iconContainer","Arrow","useEffect","subscription","FocusedInputEvents","addListener","remove","toolbarStyle","useMemo","styles","toolbar","backgroundColor","background","KEYBOARD_HAS_ROUNDED_CORNERS","paddingLeft","left","paddingRight","right","floating","containerStyle","marginLeft","marginRight","KEYBOARD_TOOLBAR_HEIGHT","OPENED_OFFSET","backgroundElement","arrowsElement","contentContainer","doneElement","prevChild","nextChild","contentChild","doneChild","backgroundChild","React","Children","forEach","child","isValidElement","type","Background","Content","Prev","Next","Done","createElement","View","style","arrows","onPress","text","contextValue","ToolbarContext","Provider","value","testID","TEST_ID_KEYBOARD_TOOLBAR","StyleSheet","create","position","bottom","alignItems","width","flexDirection","height","alignSelf","borderRadius","overflow","_default","exports"],"sources":["index.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\n\nimport { FocusedInputEvents } from \"../../bindings\";\nimport { useKeyboardState } from \"../../hooks\";\nimport KeyboardStickyView from \"../KeyboardStickyView\";\n\nimport Arrow from \"./Arrow\";\nimport Button from \"./Button\";\nimport { colors } from \"./colors\";\nimport { Background, Content, Done, Next, Prev } from \"./compound/components\";\nimport { ToolbarContext } from \"./compound/context\";\nimport {\n  DEFAULT_OPACITY,\n  KEYBOARD_HAS_ROUNDED_CORNERS,\n  KEYBOARD_TOOLBAR_HEIGHT,\n  OPENED_OFFSET,\n  TEST_ID_KEYBOARD_TOOLBAR,\n} from \"./constants\";\n\nimport type { KeyboardToolbarProps } from \"./types\";\nimport type { ReactNode } from \"react\";\n\n/**\n * `KeyboardToolbar` is a component that is shown above the keyboard with `Prev`/`Next` buttons from left and\n * `Done` button from the right (to dismiss the keyboard). Allows to add customizable content (yours UI elements) in the middle.\n *\n * @param props - Component props.\n * @returns A component that is shown above the keyboard with `Prev`/`Next` and `Done` buttons.\n * @see {@link https://kirillzyusko.github.io/react-native-keyboard-controller/docs/api/components/keyboard-toolbar|Documentation} page for more details.\n * @example\n * ```tsx\n * <KeyboardToolbar>\n *   <KeyboardToolbar.Done text=\"Close\" />\n * </KeyboardToolbar>\n * ```\n */\nconst KeyboardToolbar: React.FC<KeyboardToolbarProps> & {\n  Background: typeof Background;\n  Content: typeof Content;\n  Prev: typeof Prev;\n  Next: typeof Next;\n  Done: typeof Done;\n} = (props) => {\n  const {\n    children,\n    content,\n    theme = colors,\n    doneText = \"Done\",\n    button,\n    icon,\n    showArrows = true,\n    onNextCallback,\n    onPrevCallback,\n    onDoneCallback,\n    blur = null,\n    opacity = DEFAULT_OPACITY,\n    offset: { closed = 0, opened = 0 } = {},\n    enabled = true,\n    insets,\n    ...rest\n  } = props;\n  const colorScheme = useKeyboardState((state) => state.appearance);\n  const [inputs, setInputs] = useState({\n    current: 0,\n    count: 0,\n  });\n  const isPrevDisabled = inputs.current === 0;\n  const isNextDisabled = inputs.current === inputs.count - 1;\n  const buttonContainer = button ?? Button;\n  const iconContainer = icon ?? Arrow;\n\n  useEffect(() => {\n    const subscription = FocusedInputEvents.addListener(\"focusDidSet\", (e) => {\n      setInputs(e);\n    });\n\n    return subscription.remove;\n  }, []);\n  const toolbarStyle = useMemo(\n    () => [\n      styles.toolbar,\n      {\n        backgroundColor: `${theme[colorScheme].background}${opacity}`,\n      },\n      !KEYBOARD_HAS_ROUNDED_CORNERS\n        ? {\n            paddingLeft: insets?.left,\n            paddingRight: insets?.right,\n          }\n        : null,\n      KEYBOARD_HAS_ROUNDED_CORNERS ? styles.floating : null,\n    ],\n    [colorScheme, opacity, theme, insets],\n  );\n  const containerStyle = useMemo(\n    () => [\n      KEYBOARD_HAS_ROUNDED_CORNERS\n        ? {\n            marginLeft: (insets?.left ?? 0) + 16,\n            marginRight: (insets?.right ?? 0) + 16,\n          }\n        : null,\n    ],\n    [insets],\n  );\n  const offset = useMemo(\n    () => ({\n      closed: closed + KEYBOARD_TOOLBAR_HEIGHT,\n      opened: opened + OPENED_OFFSET,\n    }),\n    [closed, opened],\n  );\n\n  let backgroundElement: ReactNode = null;\n  let arrowsElement: ReactNode = null;\n  let contentContainer: ReactNode = null;\n  let doneElement: ReactNode = null;\n\n  if (children) {\n    let prevChild: ReactNode = null;\n    let nextChild: ReactNode = null;\n    let contentChild: ReactNode = null;\n    let doneChild: ReactNode = null;\n    let backgroundChild: ReactNode = null;\n\n    React.Children.forEach(children, (child) => {\n      if (!React.isValidElement(child)) {\n        return;\n      }\n      const type = child.type;\n\n      if (type === Background) {\n        backgroundChild = child;\n      } else if (type === Content) {\n        contentChild = child;\n      } else if (type === Prev) {\n        prevChild = child;\n      } else if (type === Next) {\n        nextChild = child;\n      } else if (type === Done) {\n        doneChild = child;\n      }\n    });\n\n    backgroundElement = backgroundChild;\n    doneElement = doneChild;\n    arrowsElement =\n      prevChild || nextChild ? (\n        <View style={styles.arrows}>\n          {prevChild}\n          {nextChild}\n        </View>\n      ) : null;\n    contentContainer = contentChild ?? <Content>{contentChild}</Content>;\n  } else {\n    backgroundElement = blur;\n    arrowsElement = showArrows ? (\n      <View style={styles.arrows}>\n        <Prev\n          button={buttonContainer}\n          icon={iconContainer}\n          onPress={onPrevCallback}\n        />\n        <Next\n          button={buttonContainer}\n          icon={iconContainer}\n          onPress={onNextCallback}\n        />\n      </View>\n    ) : null;\n    contentContainer = <Content>{content}</Content>;\n    doneElement = doneText ? (\n      <Done button={buttonContainer} text={doneText} onPress={onDoneCallback} />\n    ) : null;\n  }\n\n  const contextValue = useMemo(\n    () => ({\n      theme,\n      isPrevDisabled,\n      isNextDisabled,\n    }),\n    [theme, isPrevDisabled, isNextDisabled],\n  );\n\n  return (\n    <ToolbarContext.Provider value={contextValue}>\n      <KeyboardStickyView\n        enabled={enabled}\n        offset={offset}\n        style={containerStyle}\n      >\n        <View {...rest} style={toolbarStyle} testID={TEST_ID_KEYBOARD_TOOLBAR}>\n          {backgroundElement}\n          {arrowsElement}\n          {contentContainer}\n          {doneElement}\n        </View>\n      </KeyboardStickyView>\n    </ToolbarContext.Provider>\n  );\n};\n\nconst styles = StyleSheet.create({\n  toolbar: {\n    position: \"absolute\",\n    bottom: 0,\n    alignItems: \"center\",\n    width: \"100%\",\n    flexDirection: \"row\",\n    height: KEYBOARD_TOOLBAR_HEIGHT,\n  },\n  arrows: {\n    flexDirection: \"row\",\n    paddingLeft: 8,\n  },\n  floating: {\n    alignSelf: \"center\",\n    borderRadius: 20,\n    overflow: \"hidden\",\n  },\n});\n\nKeyboardToolbar.Background = Background;\nKeyboardToolbar.Content = Content;\nKeyboardToolbar.Prev = Prev;\nKeyboardToolbar.Next = Next;\nKeyboardToolbar.Done = Done;\n\nexport { colors as DefaultKeyboardToolbarTheme, KeyboardToolbarProps };\nexport default KeyboardToolbar;\n"],"mappings":";;;;;;;;;;;;AAAA,IAAAA,MAAA,GAAAC,uBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AAEA,IAAAE,SAAA,GAAAF,OAAA;AACA,IAAAG,MAAA,GAAAH,OAAA;AACA,IAAAI,mBAAA,GAAAC,sBAAA,CAAAL,OAAA;AAEA,IAAAM,MAAA,GAAAD,sBAAA,CAAAL,OAAA;AACA,IAAAO,OAAA,GAAAF,sBAAA,CAAAL,OAAA;AACA,IAAAQ,OAAA,GAAAR,OAAA;AACA,IAAAS,WAAA,GAAAT,OAAA;AACA,IAAAU,QAAA,GAAAV,OAAA;AACA,IAAAW,UAAA,GAAAX,OAAA;AAMqB,SAAAK,uBAAAO,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAAA,SAAAb,wBAAAa,CAAA,EAAAG,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAjB,uBAAA,YAAAA,CAAAa,CAAA,EAAAG,CAAA,SAAAA,CAAA,IAAAH,CAAA,IAAAA,CAAA,CAAAC,UAAA,SAAAD,CAAA,MAAAO,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAR,OAAA,EAAAF,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAS,CAAA,MAAAF,CAAA,GAAAJ,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAE,CAAA,CAAAI,GAAA,CAAAX,CAAA,UAAAO,CAAA,CAAAK,GAAA,CAAAZ,CAAA,GAAAO,CAAA,CAAAM,GAAA,CAAAb,CAAA,EAAAS,CAAA,gBAAAN,CAAA,IAAAH,CAAA,gBAAAG,CAAA,OAAAW,cAAA,CAAAC,IAAA,CAAAf,CAAA,EAAAG,CAAA,OAAAK,CAAA,IAAAD,CAAA,GAAAS,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAlB,CAAA,EAAAG,CAAA,OAAAK,CAAA,CAAAI,GAAA,IAAAJ,CAAA,CAAAK,GAAA,IAAAN,CAAA,CAAAE,CAAA,EAAAN,CAAA,EAAAK,CAAA,IAAAC,CAAA,CAAAN,CAAA,IAAAH,CAAA,CAAAG,CAAA,WAAAM,CAAA,KAAAT,CAAA,EAAAG,CAAA;AAAA,SAAAgB,SAAA,WAAAA,QAAA,GAAAH,MAAA,CAAAI,MAAA,GAAAJ,MAAA,CAAAI,MAAA,CAAAC,IAAA,eAAAf,CAAA,aAAAN,CAAA,MAAAA,CAAA,GAAAsB,SAAA,CAAAC,MAAA,EAAAvB,CAAA,UAAAG,CAAA,GAAAmB,SAAA,CAAAtB,CAAA,YAAAK,CAAA,IAAAF,CAAA,OAAAW,cAAA,CAAAC,IAAA,CAAAZ,CAAA,EAAAE,CAAA,MAAAC,CAAA,CAAAD,CAAA,IAAAF,CAAA,CAAAE,CAAA,aAAAC,CAAA,KAAAa,QAAA,CAAAK,KAAA,OAAAF,SAAA;AAKrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMG,eAML,GAAIC,KAAK,IAAK;EACb,MAAM;IACJC,QAAQ;IACRC,OAAO;IACPC,KAAK,GAAGC,cAAM;IACdC,QAAQ,GAAG,MAAM;IACjBC,MAAM;IACNC,IAAI;IACJC,UAAU,GAAG,IAAI;IACjBC,cAAc;IACdC,cAAc;IACdC,cAAc;IACdC,IAAI,GAAG,IAAI;IACXC,OAAO,GAAGC,0BAAe;IACzBC,MAAM,EAAE;MAAEC,MAAM,GAAG,CAAC;MAAEC,MAAM,GAAG;IAAE,CAAC,GAAG,CAAC,CAAC;IACvCC,OAAO,GAAG,IAAI;IACdC,MAAM;IACN,GAAGC;EACL,CAAC,GAAGpB,KAAK;EACT,MAAMqB,WAAW,GAAG,IAAAC,uBAAgB,EAAEC,KAAK,IAAKA,KAAK,CAACC,UAAU,CAAC;EACjE,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAG,IAAAC,eAAQ,EAAC;IACnCC,OAAO,EAAE,CAAC;IACVC,KAAK,EAAE;EACT,CAAC,CAAC;EACF,MAAMC,cAAc,GAAGL,MAAM,CAACG,OAAO,KAAK,CAAC;EAC3C,MAAMG,cAAc,GAAGN,MAAM,CAACG,OAAO,KAAKH,MAAM,CAACI,KAAK,GAAG,CAAC;EAC1D,MAAMG,eAAe,GAAG1B,MAAM,IAAI2B,eAAM;EACxC,MAAMC,aAAa,GAAG3B,IAAI,IAAI4B,cAAK;EAEnC,IAAAC,gBAAS,EAAC,MAAM;IACd,MAAMC,YAAY,GAAGC,4BAAkB,CAACC,WAAW,CAAC,aAAa,EAAGjE,CAAC,IAAK;MACxEoD,SAAS,CAACpD,CAAC,CAAC;IACd,CAAC,CAAC;IAEF,OAAO+D,YAAY,CAACG,MAAM;EAC5B,CAAC,EAAE,EAAE,CAAC;EACN,MAAMC,YAAY,GAAG,IAAAC,cAAO,EAC1B,MAAM,CACJC,MAAM,CAACC,OAAO,EACd;IACEC,eAAe,EAAE,GAAG1C,KAAK,CAACkB,WAAW,CAAC,CAACyB,UAAU,GAAGjC,OAAO;EAC7D,CAAC,EACD,CAACkC,uCAA4B,GACzB;IACEC,WAAW,EAAE7B,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAE8B,IAAI;IACzBC,YAAY,EAAE/B,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEgC;EACxB,CAAC,GACD,IAAI,EACRJ,uCAA4B,GAAGJ,MAAM,CAACS,QAAQ,GAAG,IAAI,CACtD,EACD,CAAC/B,WAAW,EAAER,OAAO,EAAEV,KAAK,EAAEgB,MAAM,CACtC,CAAC;EACD,MAAMkC,cAAc,GAAG,IAAAX,cAAO,EAC5B,MAAM,CACJK,uCAA4B,GACxB;IACEO,UAAU,EAAE,CAAC,CAAAnC,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAE8B,IAAI,KAAI,CAAC,IAAI,EAAE;IACpCM,WAAW,EAAE,CAAC,CAAApC,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEgC,KAAK,KAAI,CAAC,IAAI;EACtC,CAAC,GACD,IAAI,CACT,EACD,CAAChC,MAAM,CACT,CAAC;EACD,MAAMJ,MAAM,GAAG,IAAA2B,cAAO,EACpB,OAAO;IACL1B,MAAM,EAAEA,MAAM,GAAGwC,kCAAuB;IACxCvC,MAAM,EAAEA,MAAM,GAAGwC;EACnB,CAAC,CAAC,EACF,CAACzC,MAAM,EAAEC,MAAM,CACjB,CAAC;EAED,IAAIyC,iBAA4B,GAAG,IAAI;EACvC,IAAIC,aAAwB,GAAG,IAAI;EACnC,IAAIC,gBAA2B,GAAG,IAAI;EACtC,IAAIC,WAAsB,GAAG,IAAI;EAEjC,IAAI5D,QAAQ,EAAE;IACZ,IAAI6D,SAAoB,GAAG,IAAI;IAC/B,IAAIC,SAAoB,GAAG,IAAI;IAC/B,IAAIC,YAAuB,GAAG,IAAI;IAClC,IAAIC,SAAoB,GAAG,IAAI;IAC/B,IAAIC,eAA0B,GAAG,IAAI;IAErCC,cAAK,CAACC,QAAQ,CAACC,OAAO,CAACpE,QAAQ,EAAGqE,KAAK,IAAK;MAC1C,IAAI,eAACH,cAAK,CAACI,cAAc,CAACD,KAAK,CAAC,EAAE;QAChC;MACF;MACA,MAAME,IAAI,GAAGF,KAAK,CAACE,IAAI;MAEvB,IAAIA,IAAI,KAAKC,sBAAU,EAAE;QACvBP,eAAe,GAAGI,KAAK;MACzB,CAAC,MAAM,IAAIE,IAAI,KAAKE,mBAAO,EAAE;QAC3BV,YAAY,GAAGM,KAAK;MACtB,CAAC,MAAM,IAAIE,IAAI,KAAKG,gBAAI,EAAE;QACxBb,SAAS,GAAGQ,KAAK;MACnB,CAAC,MAAM,IAAIE,IAAI,KAAKI,gBAAI,EAAE;QACxBb,SAAS,GAAGO,KAAK;MACnB,CAAC,MAAM,IAAIE,IAAI,KAAKK,gBAAI,EAAE;QACxBZ,SAAS,GAAGK,KAAK;MACnB;IACF,CAAC,CAAC;IAEFZ,iBAAiB,GAAGQ,eAAe;IACnCL,WAAW,GAAGI,SAAS;IACvBN,aAAa,GACXG,SAAS,IAAIC,SAAS,gBACpBvG,MAAA,CAAAgB,OAAA,CAAAsG,aAAA,CAACnH,YAAA,CAAAoH,IAAI;MAACC,KAAK,EAAErC,MAAM,CAACsC;IAAO,GACxBnB,SAAS,EACTC,SACG,CAAC,GACL,IAAI;IACVH,gBAAgB,GAAGI,YAAY,iBAAIxG,MAAA,CAAAgB,OAAA,CAAAsG,aAAA,CAAC3G,WAAA,CAAAuG,OAAO,QAAEV,YAAsB,CAAC;EACtE,CAAC,MAAM;IACLN,iBAAiB,GAAG9C,IAAI;IACxB+C,aAAa,GAAGnD,UAAU,gBACxBhD,MAAA,CAAAgB,OAAA,CAAAsG,aAAA,CAACnH,YAAA,CAAAoH,IAAI;MAACC,KAAK,EAAErC,MAAM,CAACsC;IAAO,gBACzBzH,MAAA,CAAAgB,OAAA,CAAAsG,aAAA,CAAC3G,WAAA,CAAAwG,IAAI;MACHrE,MAAM,EAAE0B,eAAgB;MACxBzB,IAAI,EAAE2B,aAAc;MACpBgD,OAAO,EAAExE;IAAe,CACzB,CAAC,eACFlD,MAAA,CAAAgB,OAAA,CAAAsG,aAAA,CAAC3G,WAAA,CAAAyG,IAAI;MACHtE,MAAM,EAAE0B,eAAgB;MACxBzB,IAAI,EAAE2B,aAAc;MACpBgD,OAAO,EAAEzE;IAAe,CACzB,CACG,CAAC,GACL,IAAI;IACRmD,gBAAgB,gBAAGpG,MAAA,CAAAgB,OAAA,CAAAsG,aAAA,CAAC3G,WAAA,CAAAuG,OAAO,QAAExE,OAAiB,CAAC;IAC/C2D,WAAW,GAAGxD,QAAQ,gBACpB7C,MAAA,CAAAgB,OAAA,CAAAsG,aAAA,CAAC3G,WAAA,CAAA0G,IAAI;MAACvE,MAAM,EAAE0B,eAAgB;MAACmD,IAAI,EAAE9E,QAAS;MAAC6E,OAAO,EAAEvE;IAAe,CAAE,CAAC,GACxE,IAAI;EACV;EAEA,MAAMyE,YAAY,GAAG,IAAA1C,cAAO,EAC1B,OAAO;IACLvC,KAAK;IACL2B,cAAc;IACdC;EACF,CAAC,CAAC,EACF,CAAC5B,KAAK,EAAE2B,cAAc,EAAEC,cAAc,CACxC,CAAC;EAED,oBACEvE,MAAA,CAAAgB,OAAA,CAAAsG,aAAA,CAAC1G,QAAA,CAAAiH,cAAc,CAACC,QAAQ;IAACC,KAAK,EAAEH;EAAa,gBAC3C5H,MAAA,CAAAgB,OAAA,CAAAsG,aAAA,CAAChH,mBAAA,CAAAU,OAAkB;IACjB0C,OAAO,EAAEA,OAAQ;IACjBH,MAAM,EAAEA,MAAO;IACfiE,KAAK,EAAE3B;EAAe,gBAEtB7F,MAAA,CAAAgB,OAAA,CAAAsG,aAAA,CAACnH,YAAA,CAAAoH,IAAI,EAAAtF,QAAA,KAAK2B,IAAI;IAAE4D,KAAK,EAAEvC,YAAa;IAAC+C,MAAM,EAAEC;EAAyB,IACnE/B,iBAAiB,EACjBC,aAAa,EACbC,gBAAgB,EAChBC,WACG,CACY,CACG,CAAC;AAE9B,CAAC;AAED,MAAMlB,MAAM,GAAG+C,uBAAU,CAACC,MAAM,CAAC;EAC/B/C,OAAO,EAAE;IACPgD,QAAQ,EAAE,UAAU;IACpBC,MAAM,EAAE,CAAC;IACTC,UAAU,EAAE,QAAQ;IACpBC,KAAK,EAAE,MAAM;IACbC,aAAa,EAAE,KAAK;IACpBC,MAAM,EAAEzC;EACV,CAAC;EACDyB,MAAM,EAAE;IACNe,aAAa,EAAE,KAAK;IACpBhD,WAAW,EAAE;EACf,CAAC;EACDI,QAAQ,EAAE;IACR8C,SAAS,EAAE,QAAQ;IACnBC,YAAY,EAAE,EAAE;IAChBC,QAAQ,EAAE;EACZ;AACF,CAAC,CAAC;AAEFrG,eAAe,CAAC0E,UAAU,GAAGA,sBAAU;AACvC1E,eAAe,CAAC2E,OAAO,GAAGA,mBAAO;AACjC3E,eAAe,CAAC4E,IAAI,GAAGA,gBAAI;AAC3B5E,eAAe,CAAC6E,IAAI,GAAGA,gBAAI;AAC3B7E,eAAe,CAAC8E,IAAI,GAAGA,gBAAI;AAAC,IAAAwB,QAAA,GAAAC,OAAA,CAAA9H,OAAA,GAGbuB,eAAe","ignoreList":[]}