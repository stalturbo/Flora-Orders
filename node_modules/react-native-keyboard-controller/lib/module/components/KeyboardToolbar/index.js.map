{"version":3,"names":["React","useEffect","useMemo","useState","StyleSheet","View","FocusedInputEvents","useKeyboardState","KeyboardStickyView","Arrow","Button","colors","Background","Content","Done","Next","Prev","ToolbarContext","DEFAULT_OPACITY","KEYBOARD_HAS_ROUNDED_CORNERS","KEYBOARD_TOOLBAR_HEIGHT","OPENED_OFFSET","TEST_ID_KEYBOARD_TOOLBAR","KeyboardToolbar","props","children","content","theme","doneText","button","icon","showArrows","onNextCallback","onPrevCallback","onDoneCallback","blur","opacity","offset","closed","opened","enabled","insets","rest","colorScheme","state","appearance","inputs","setInputs","current","count","isPrevDisabled","isNextDisabled","buttonContainer","iconContainer","subscription","addListener","e","remove","toolbarStyle","styles","toolbar","backgroundColor","background","paddingLeft","left","paddingRight","right","floating","containerStyle","marginLeft","marginRight","backgroundElement","arrowsElement","contentContainer","doneElement","prevChild","nextChild","contentChild","doneChild","backgroundChild","Children","forEach","child","isValidElement","type","createElement","style","arrows","onPress","text","contextValue","Provider","value","_extends","testID","create","position","bottom","alignItems","width","flexDirection","height","alignSelf","borderRadius","overflow","DefaultKeyboardToolbarTheme"],"sources":["index.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\nimport { StyleSheet, View } from \"react-native\";\n\nimport { FocusedInputEvents } from \"../../bindings\";\nimport { useKeyboardState } from \"../../hooks\";\nimport KeyboardStickyView from \"../KeyboardStickyView\";\n\nimport Arrow from \"./Arrow\";\nimport Button from \"./Button\";\nimport { colors } from \"./colors\";\nimport { Background, Content, Done, Next, Prev } from \"./compound/components\";\nimport { ToolbarContext } from \"./compound/context\";\nimport {\n  DEFAULT_OPACITY,\n  KEYBOARD_HAS_ROUNDED_CORNERS,\n  KEYBOARD_TOOLBAR_HEIGHT,\n  OPENED_OFFSET,\n  TEST_ID_KEYBOARD_TOOLBAR,\n} from \"./constants\";\n\nimport type { KeyboardToolbarProps } from \"./types\";\nimport type { ReactNode } from \"react\";\n\n/**\n * `KeyboardToolbar` is a component that is shown above the keyboard with `Prev`/`Next` buttons from left and\n * `Done` button from the right (to dismiss the keyboard). Allows to add customizable content (yours UI elements) in the middle.\n *\n * @param props - Component props.\n * @returns A component that is shown above the keyboard with `Prev`/`Next` and `Done` buttons.\n * @see {@link https://kirillzyusko.github.io/react-native-keyboard-controller/docs/api/components/keyboard-toolbar|Documentation} page for more details.\n * @example\n * ```tsx\n * <KeyboardToolbar>\n *   <KeyboardToolbar.Done text=\"Close\" />\n * </KeyboardToolbar>\n * ```\n */\nconst KeyboardToolbar: React.FC<KeyboardToolbarProps> & {\n  Background: typeof Background;\n  Content: typeof Content;\n  Prev: typeof Prev;\n  Next: typeof Next;\n  Done: typeof Done;\n} = (props) => {\n  const {\n    children,\n    content,\n    theme = colors,\n    doneText = \"Done\",\n    button,\n    icon,\n    showArrows = true,\n    onNextCallback,\n    onPrevCallback,\n    onDoneCallback,\n    blur = null,\n    opacity = DEFAULT_OPACITY,\n    offset: { closed = 0, opened = 0 } = {},\n    enabled = true,\n    insets,\n    ...rest\n  } = props;\n  const colorScheme = useKeyboardState((state) => state.appearance);\n  const [inputs, setInputs] = useState({\n    current: 0,\n    count: 0,\n  });\n  const isPrevDisabled = inputs.current === 0;\n  const isNextDisabled = inputs.current === inputs.count - 1;\n  const buttonContainer = button ?? Button;\n  const iconContainer = icon ?? Arrow;\n\n  useEffect(() => {\n    const subscription = FocusedInputEvents.addListener(\"focusDidSet\", (e) => {\n      setInputs(e);\n    });\n\n    return subscription.remove;\n  }, []);\n  const toolbarStyle = useMemo(\n    () => [\n      styles.toolbar,\n      {\n        backgroundColor: `${theme[colorScheme].background}${opacity}`,\n      },\n      !KEYBOARD_HAS_ROUNDED_CORNERS\n        ? {\n            paddingLeft: insets?.left,\n            paddingRight: insets?.right,\n          }\n        : null,\n      KEYBOARD_HAS_ROUNDED_CORNERS ? styles.floating : null,\n    ],\n    [colorScheme, opacity, theme, insets],\n  );\n  const containerStyle = useMemo(\n    () => [\n      KEYBOARD_HAS_ROUNDED_CORNERS\n        ? {\n            marginLeft: (insets?.left ?? 0) + 16,\n            marginRight: (insets?.right ?? 0) + 16,\n          }\n        : null,\n    ],\n    [insets],\n  );\n  const offset = useMemo(\n    () => ({\n      closed: closed + KEYBOARD_TOOLBAR_HEIGHT,\n      opened: opened + OPENED_OFFSET,\n    }),\n    [closed, opened],\n  );\n\n  let backgroundElement: ReactNode = null;\n  let arrowsElement: ReactNode = null;\n  let contentContainer: ReactNode = null;\n  let doneElement: ReactNode = null;\n\n  if (children) {\n    let prevChild: ReactNode = null;\n    let nextChild: ReactNode = null;\n    let contentChild: ReactNode = null;\n    let doneChild: ReactNode = null;\n    let backgroundChild: ReactNode = null;\n\n    React.Children.forEach(children, (child) => {\n      if (!React.isValidElement(child)) {\n        return;\n      }\n      const type = child.type;\n\n      if (type === Background) {\n        backgroundChild = child;\n      } else if (type === Content) {\n        contentChild = child;\n      } else if (type === Prev) {\n        prevChild = child;\n      } else if (type === Next) {\n        nextChild = child;\n      } else if (type === Done) {\n        doneChild = child;\n      }\n    });\n\n    backgroundElement = backgroundChild;\n    doneElement = doneChild;\n    arrowsElement =\n      prevChild || nextChild ? (\n        <View style={styles.arrows}>\n          {prevChild}\n          {nextChild}\n        </View>\n      ) : null;\n    contentContainer = contentChild ?? <Content>{contentChild}</Content>;\n  } else {\n    backgroundElement = blur;\n    arrowsElement = showArrows ? (\n      <View style={styles.arrows}>\n        <Prev\n          button={buttonContainer}\n          icon={iconContainer}\n          onPress={onPrevCallback}\n        />\n        <Next\n          button={buttonContainer}\n          icon={iconContainer}\n          onPress={onNextCallback}\n        />\n      </View>\n    ) : null;\n    contentContainer = <Content>{content}</Content>;\n    doneElement = doneText ? (\n      <Done button={buttonContainer} text={doneText} onPress={onDoneCallback} />\n    ) : null;\n  }\n\n  const contextValue = useMemo(\n    () => ({\n      theme,\n      isPrevDisabled,\n      isNextDisabled,\n    }),\n    [theme, isPrevDisabled, isNextDisabled],\n  );\n\n  return (\n    <ToolbarContext.Provider value={contextValue}>\n      <KeyboardStickyView\n        enabled={enabled}\n        offset={offset}\n        style={containerStyle}\n      >\n        <View {...rest} style={toolbarStyle} testID={TEST_ID_KEYBOARD_TOOLBAR}>\n          {backgroundElement}\n          {arrowsElement}\n          {contentContainer}\n          {doneElement}\n        </View>\n      </KeyboardStickyView>\n    </ToolbarContext.Provider>\n  );\n};\n\nconst styles = StyleSheet.create({\n  toolbar: {\n    position: \"absolute\",\n    bottom: 0,\n    alignItems: \"center\",\n    width: \"100%\",\n    flexDirection: \"row\",\n    height: KEYBOARD_TOOLBAR_HEIGHT,\n  },\n  arrows: {\n    flexDirection: \"row\",\n    paddingLeft: 8,\n  },\n  floating: {\n    alignSelf: \"center\",\n    borderRadius: 20,\n    overflow: \"hidden\",\n  },\n});\n\nKeyboardToolbar.Background = Background;\nKeyboardToolbar.Content = Content;\nKeyboardToolbar.Prev = Prev;\nKeyboardToolbar.Next = Next;\nKeyboardToolbar.Done = Done;\n\nexport { colors as DefaultKeyboardToolbarTheme, KeyboardToolbarProps };\nexport default KeyboardToolbar;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAC3D,SAASC,UAAU,EAAEC,IAAI,QAAQ,cAAc;AAE/C,SAASC,kBAAkB,QAAQ,gBAAgB;AACnD,SAASC,gBAAgB,QAAQ,aAAa;AAC9C,OAAOC,kBAAkB,MAAM,uBAAuB;AAEtD,OAAOC,KAAK,MAAM,SAAS;AAC3B,OAAOC,MAAM,MAAM,UAAU;AAC7B,SAASC,MAAM,QAAQ,UAAU;AACjC,SAASC,UAAU,EAAEC,OAAO,EAAEC,IAAI,EAAEC,IAAI,EAAEC,IAAI,QAAQ,uBAAuB;AAC7E,SAASC,cAAc,QAAQ,oBAAoB;AACnD,SACEC,eAAe,EACfC,4BAA4B,EAC5BC,uBAAuB,EACvBC,aAAa,EACbC,wBAAwB,QACnB,aAAa;AAKpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,eAML,GAAIC,KAAK,IAAK;EACb,MAAM;IACJC,QAAQ;IACRC,OAAO;IACPC,KAAK,GAAGhB,MAAM;IACdiB,QAAQ,GAAG,MAAM;IACjBC,MAAM;IACNC,IAAI;IACJC,UAAU,GAAG,IAAI;IACjBC,cAAc;IACdC,cAAc;IACdC,cAAc;IACdC,IAAI,GAAG,IAAI;IACXC,OAAO,GAAGlB,eAAe;IACzBmB,MAAM,EAAE;MAAEC,MAAM,GAAG,CAAC;MAAEC,MAAM,GAAG;IAAE,CAAC,GAAG,CAAC,CAAC;IACvCC,OAAO,GAAG,IAAI;IACdC,MAAM;IACN,GAAGC;EACL,CAAC,GAAGlB,KAAK;EACT,MAAMmB,WAAW,GAAGpC,gBAAgB,CAAEqC,KAAK,IAAKA,KAAK,CAACC,UAAU,CAAC;EACjE,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAG5C,QAAQ,CAAC;IACnC6C,OAAO,EAAE,CAAC;IACVC,KAAK,EAAE;EACT,CAAC,CAAC;EACF,MAAMC,cAAc,GAAGJ,MAAM,CAACE,OAAO,KAAK,CAAC;EAC3C,MAAMG,cAAc,GAAGL,MAAM,CAACE,OAAO,KAAKF,MAAM,CAACG,KAAK,GAAG,CAAC;EAC1D,MAAMG,eAAe,GAAGvB,MAAM,IAAInB,MAAM;EACxC,MAAM2C,aAAa,GAAGvB,IAAI,IAAIrB,KAAK;EAEnCR,SAAS,CAAC,MAAM;IACd,MAAMqD,YAAY,GAAGhD,kBAAkB,CAACiD,WAAW,CAAC,aAAa,EAAGC,CAAC,IAAK;MACxET,SAAS,CAACS,CAAC,CAAC;IACd,CAAC,CAAC;IAEF,OAAOF,YAAY,CAACG,MAAM;EAC5B,CAAC,EAAE,EAAE,CAAC;EACN,MAAMC,YAAY,GAAGxD,OAAO,CAC1B,MAAM,CACJyD,MAAM,CAACC,OAAO,EACd;IACEC,eAAe,EAAE,GAAGlC,KAAK,CAACgB,WAAW,CAAC,CAACmB,UAAU,GAAG1B,OAAO;EAC7D,CAAC,EACD,CAACjB,4BAA4B,GACzB;IACE4C,WAAW,EAAEtB,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEuB,IAAI;IACzBC,YAAY,EAAExB,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEyB;EACxB,CAAC,GACD,IAAI,EACR/C,4BAA4B,GAAGwC,MAAM,CAACQ,QAAQ,GAAG,IAAI,CACtD,EACD,CAACxB,WAAW,EAAEP,OAAO,EAAET,KAAK,EAAEc,MAAM,CACtC,CAAC;EACD,MAAM2B,cAAc,GAAGlE,OAAO,CAC5B,MAAM,CACJiB,4BAA4B,GACxB;IACEkD,UAAU,EAAE,CAAC,CAAA5B,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEuB,IAAI,KAAI,CAAC,IAAI,EAAE;IACpCM,WAAW,EAAE,CAAC,CAAA7B,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEyB,KAAK,KAAI,CAAC,IAAI;EACtC,CAAC,GACD,IAAI,CACT,EACD,CAACzB,MAAM,CACT,CAAC;EACD,MAAMJ,MAAM,GAAGnC,OAAO,CACpB,OAAO;IACLoC,MAAM,EAAEA,MAAM,GAAGlB,uBAAuB;IACxCmB,MAAM,EAAEA,MAAM,GAAGlB;EACnB,CAAC,CAAC,EACF,CAACiB,MAAM,EAAEC,MAAM,CACjB,CAAC;EAED,IAAIgC,iBAA4B,GAAG,IAAI;EACvC,IAAIC,aAAwB,GAAG,IAAI;EACnC,IAAIC,gBAA2B,GAAG,IAAI;EACtC,IAAIC,WAAsB,GAAG,IAAI;EAEjC,IAAIjD,QAAQ,EAAE;IACZ,IAAIkD,SAAoB,GAAG,IAAI;IAC/B,IAAIC,SAAoB,GAAG,IAAI;IAC/B,IAAIC,YAAuB,GAAG,IAAI;IAClC,IAAIC,SAAoB,GAAG,IAAI;IAC/B,IAAIC,eAA0B,GAAG,IAAI;IAErC/E,KAAK,CAACgF,QAAQ,CAACC,OAAO,CAACxD,QAAQ,EAAGyD,KAAK,IAAK;MAC1C,IAAI,eAAClF,KAAK,CAACmF,cAAc,CAACD,KAAK,CAAC,EAAE;QAChC;MACF;MACA,MAAME,IAAI,GAAGF,KAAK,CAACE,IAAI;MAEvB,IAAIA,IAAI,KAAKxE,UAAU,EAAE;QACvBmE,eAAe,GAAGG,KAAK;MACzB,CAAC,MAAM,IAAIE,IAAI,KAAKvE,OAAO,EAAE;QAC3BgE,YAAY,GAAGK,KAAK;MACtB,CAAC,MAAM,IAAIE,IAAI,KAAKpE,IAAI,EAAE;QACxB2D,SAAS,GAAGO,KAAK;MACnB,CAAC,MAAM,IAAIE,IAAI,KAAKrE,IAAI,EAAE;QACxB6D,SAAS,GAAGM,KAAK;MACnB,CAAC,MAAM,IAAIE,IAAI,KAAKtE,IAAI,EAAE;QACxBgE,SAAS,GAAGI,KAAK;MACnB;IACF,CAAC,CAAC;IAEFX,iBAAiB,GAAGQ,eAAe;IACnCL,WAAW,GAAGI,SAAS;IACvBN,aAAa,GACXG,SAAS,IAAIC,SAAS,gBACpB5E,KAAA,CAAAqF,aAAA,CAAChF,IAAI;MAACiF,KAAK,EAAE3B,MAAM,CAAC4B;IAAO,GACxBZ,SAAS,EACTC,SACG,CAAC,GACL,IAAI;IACVH,gBAAgB,GAAGI,YAAY,iBAAI7E,KAAA,CAAAqF,aAAA,CAACxE,OAAO,QAAEgE,YAAsB,CAAC;EACtE,CAAC,MAAM;IACLN,iBAAiB,GAAGpC,IAAI;IACxBqC,aAAa,GAAGzC,UAAU,gBACxB/B,KAAA,CAAAqF,aAAA,CAAChF,IAAI;MAACiF,KAAK,EAAE3B,MAAM,CAAC4B;IAAO,gBACzBvF,KAAA,CAAAqF,aAAA,CAACrE,IAAI;MACHa,MAAM,EAAEuB,eAAgB;MACxBtB,IAAI,EAAEuB,aAAc;MACpBmC,OAAO,EAAEvD;IAAe,CACzB,CAAC,eACFjC,KAAA,CAAAqF,aAAA,CAACtE,IAAI;MACHc,MAAM,EAAEuB,eAAgB;MACxBtB,IAAI,EAAEuB,aAAc;MACpBmC,OAAO,EAAExD;IAAe,CACzB,CACG,CAAC,GACL,IAAI;IACRyC,gBAAgB,gBAAGzE,KAAA,CAAAqF,aAAA,CAACxE,OAAO,QAAEa,OAAiB,CAAC;IAC/CgD,WAAW,GAAG9C,QAAQ,gBACpB5B,KAAA,CAAAqF,aAAA,CAACvE,IAAI;MAACe,MAAM,EAAEuB,eAAgB;MAACqC,IAAI,EAAE7D,QAAS;MAAC4D,OAAO,EAAEtD;IAAe,CAAE,CAAC,GACxE,IAAI;EACV;EAEA,MAAMwD,YAAY,GAAGxF,OAAO,CAC1B,OAAO;IACLyB,KAAK;IACLuB,cAAc;IACdC;EACF,CAAC,CAAC,EACF,CAACxB,KAAK,EAAEuB,cAAc,EAAEC,cAAc,CACxC,CAAC;EAED,oBACEnD,KAAA,CAAAqF,aAAA,CAACpE,cAAc,CAAC0E,QAAQ;IAACC,KAAK,EAAEF;EAAa,gBAC3C1F,KAAA,CAAAqF,aAAA,CAAC7E,kBAAkB;IACjBgC,OAAO,EAAEA,OAAQ;IACjBH,MAAM,EAAEA,MAAO;IACfiD,KAAK,EAAElB;EAAe,gBAEtBpE,KAAA,CAAAqF,aAAA,CAAChF,IAAI,EAAAwF,QAAA,KAAKnD,IAAI;IAAE4C,KAAK,EAAE5B,YAAa;IAACoC,MAAM,EAAExE;EAAyB,IACnEiD,iBAAiB,EACjBC,aAAa,EACbC,gBAAgB,EAChBC,WACG,CACY,CACG,CAAC;AAE9B,CAAC;AAED,MAAMf,MAAM,GAAGvD,UAAU,CAAC2F,MAAM,CAAC;EAC/BnC,OAAO,EAAE;IACPoC,QAAQ,EAAE,UAAU;IACpBC,MAAM,EAAE,CAAC;IACTC,UAAU,EAAE,QAAQ;IACpBC,KAAK,EAAE,MAAM;IACbC,aAAa,EAAE,KAAK;IACpBC,MAAM,EAAEjF;EACV,CAAC;EACDmE,MAAM,EAAE;IACNa,aAAa,EAAE,KAAK;IACpBrC,WAAW,EAAE;EACf,CAAC;EACDI,QAAQ,EAAE;IACRmC,SAAS,EAAE,QAAQ;IACnBC,YAAY,EAAE,EAAE;IAChBC,QAAQ,EAAE;EACZ;AACF,CAAC,CAAC;AAEFjF,eAAe,CAACX,UAAU,GAAGA,UAAU;AACvCW,eAAe,CAACV,OAAO,GAAGA,OAAO;AACjCU,eAAe,CAACP,IAAI,GAAGA,IAAI;AAC3BO,eAAe,CAACR,IAAI,GAAGA,IAAI;AAC3BQ,eAAe,CAACT,IAAI,GAAGA,IAAI;AAE3B,SAASH,MAAM,IAAI8F,2BAA2B;AAC9C,eAAelF,eAAe","ignoreList":[]}